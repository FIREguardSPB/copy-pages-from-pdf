{"version":3,"sources":["components/UIcomponents.js","Utils/createIntervalArray.js","Utils/copyPagesFromPdfTest.js","Utils/fileSaver.js","App.js","index.js"],"names":["Container","styled","div","createIntervalArray","num1","num2","nums","console","log","intervalArray","i","push","PDFDocument","require","copyPages","item","data","a","splitItems","split","forEach","includes","parseInt","splice","resulPagesNumber","reduce","arr","el","Array","isArray","load","donorPdfDoc","pagesCount","getPages","length","Error","resSet","Set","from","sort","b","create","pdfDoc","firstDonorPage","Promise","all","map","addPage","save","alert","message","fileSaver","file","blob","Blob","type","downloadUrl","window","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","remove","e","App","useState","setData","inputData","setInputData","onButton","preventDefault","result","accept","onChange","target","files","reader","FileReader","addEventListener","event","readAsDataURL","name","placeholder","value","onClick","style","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fefeee08.chunk.js","sourcesContent":["import styled from \"styled-components\";\r\n\r\n\r\nexport const Container = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  //display: block;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  padding-left: 15px;\r\n  padding-right: 15px;\r\n  border: 1px solid;\r\n  border-radius: 10px;\r\n\r\n  @media (min-width: 1200px) {\r\n    width: 350px;\r\n    max-width: 100%;\r\n  }\r\n\r\n  :before {\r\n    box-sizing: inherit;\r\n  }\r\n\r\n  :after {\r\n    content: \"\";\r\n    display: table;\r\n    clear: both;\r\n  }\r\n`","export default function createIntervalArray(num1, num2) {\r\n\tlet nums = [num1, num2 ? num2 : num1]\r\n\tconsole.log(nums, '====')\r\n\tconst intervalArray = []\r\n\tfor (let i = nums[0]; i <= nums[1]; i++) {\r\n\t\tintervalArray.push(i - 1)\r\n\t}\r\n\tconsole.log(intervalArray, '!!!!!!!!!!')\r\n\treturn intervalArray\r\n}","import createIntervalArray from \"./createIntervalArray\";\r\n\r\nconst {PDFDocument} = require('pdf-lib')\r\n// const pdfReader = require('./utils/pdfReader.js')\r\n// const createJsonFile = require('./utils/createJsonFile.js')\r\n// const createIntervalArray = require('./createIntervalArray.js');\r\n// const item = '1-5, 21, 3-8'\r\n\r\nexport default async function copyPages(item, data) {\r\n\ttry {\r\n\t\tconst splitItems = item.split(',')\r\n\t\tconsole.log(splitItems)\r\n\t\tsplitItems.forEach((item, i) => {\r\n\t\t\tif (item.includes('-')) {\r\n\t\t\t\tconst num1 = parseInt(item.split('-')[0], 10)\r\n\t\t\t\tconst num2 = parseInt(item.split('-')[1], 10)\r\n\t\t\t\tsplitItems.splice(i, 1, createIntervalArray(num1, num2))\r\n\t\t\t} else {\r\n\t\t\t\tsplitItems.splice(i, 1, parseInt(item, 10) - 1)\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst resulPagesNumber = splitItems.reduce((arr, el) => {\r\n\t\t\tif (Array.isArray(el)) {\r\n\t\t\t\tarr.push(...el)\r\n\t\t\t} else {\r\n\t\t\t\tarr.push(el)\r\n\t\t\t}\r\n\t\t\t;\r\n\t\t\treturn arr\r\n\t\t}, [])\r\n\t\tconsole.log(resulPagesNumber)\r\n\t\tconst donorPdfDoc = await PDFDocument.load(data)\r\n\t\tconst pagesCount = donorPdfDoc.getPages().length\r\n\t\tconsole.log(pagesCount)\r\n\t\tresulPagesNumber.forEach((el) => {\r\n\t\t\tif (el + 1 > pagesCount || el + 1 < 0) {\r\n\t\t\t\tthrow new Error(`Некорректно указаны страницы. Выход за пределы интервала существующих страниц. Всего страниц - ${pagesCount}`)\r\n\t\t\t}\r\n\t\t})\r\n\t\tconst resSet = new Set(resulPagesNumber)\r\n\t\tconsole.log(Array.from(resSet).sort((a, b) => a - b))\r\n\t\tconst pdfDoc = await PDFDocument.create();\r\n\t\tconst firstDonorPage = await pdfDoc.copyPages(donorPdfDoc, resulPagesNumber)\r\n\t\tawait Promise.all(firstDonorPage.map(async (el) => {\r\n\t\t\tawait pdfDoc.addPage(el)\r\n\t\t}))\r\n\t\treturn await pdfDoc.save()\r\n\t} catch (e) {\r\n\t\talert(e.message)\r\n\t}\r\n}\r\n","export default function fileSaver(file) {\r\n  try {\r\n    const blob = new Blob([file], {type: 'application/pdf'})\r\n    console.log(blob)\r\n    const downloadUrl = window.URL.createObjectURL(blob)\r\n    console.log(downloadUrl)\r\n    const link = document.createElement('a')\r\n    link.href = downloadUrl\r\n    link.download = `copyResult.pdf`\r\n    document.body.appendChild(link)\r\n    link.click()\r\n    link.remove()\r\n  }\r\n  catch (e) {\r\n    console.log(e)\r\n  }\r\n}","import './App.css';\nimport {useState} from \"react\";\nimport {\n\tContainer\n} from \"./components/UIcomponents\";\nimport copyPages from \"./Utils/copyPagesFromPdfTest\";\nimport fileSaver from \"./Utils/fileSaver\";\n\nfunction App() {\n\tconst [data, setData] = useState(null)\n\tconst [inputData, setInputData] = useState('')\n\tconst onLoad = (e) => {\n\t\ttry {\n\t\t\tconst file = e.target.files[0]\n\t\t\tconst reader = new FileReader();\n\t\t\treader.addEventListener('load', (event) => {\n\t\t\t\tsetData(event.target.result)\n\t\t\t});\n\t\t\treader.addEventListener('error', (event) => {\n\t\t\t\talert('Ошибка чтения файла')\n\t\t\t})\n\t\t\tif (file) {\n\t\t\t\treader.readAsDataURL(file)\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n\tconst onButton = async (e) => {\n\t\ttry {\n\t\t\te.preventDefault()\n\t\t\tconst result = await copyPages(inputData, data)\n\t\t\tawait fileSaver(result)\n\t\t} catch (e) {\n\t\t\tconsole.log(e)\n\t\t}\n\t}\n\tconst onWrite = (e) => {\n\t\tsetInputData(e.target.value)\n\t}\n\t\n\treturn (\n\t\t<>\n\t\t\t<Container>\n\t\t\t\t<br/>\n\t\t\t\t<a><b>Копирование отдельных страниц из PDF</b></a>\n\t\t\t\t<br/>\n\t\t\t\t<input type='file' accept='.pdf' onChange={onLoad} name='file'/>\n\t\t\t\t<br/>\n\t\t\t\t<a>Номера копируемых страниц</a>\n\t\t\t\t<input type='text' placeholder=\"Например: 2, 3-8, 12\" onChange={onWrite}/>\n\t\t\t\t{data && inputData ? <button onClick={onButton} style={{'margin-top': '10px', 'align-item': 'center'}}>Выполнить\n\t\t\t\t\tкопирование</button> : null}\n\t\t\t\t<br/>\n\t\t\t\t<br/>\n\t\t\t\t<br/>\n\t\t\t</Container>\n\t\t</>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}